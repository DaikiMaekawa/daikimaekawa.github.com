---
title: "i-Cart miniのROS対応と公道で行った走行実験のレポート"
layout: post
category : ROS
tagline: <p>ROS布教の一環としてつくばチャレンジ2014に参加</p>
tags : [ROS, TsukubaChallenge, Navigation]
---

{% include JB/setup %}

この投稿は[ROS Advent Calendar 2014](http://qiita.com/advent-calendar/2014/ros)の3日目の記事です。

少し間が空きましたが11月16日に開催されたつくばチャレンジ2014の参加レポートです。

ROSの布教を目的にi-Cart miniというつくばチャレンジを中心に普及している移動プラットフォームのROS対応を行い、パッケージのリリースを行いました。

* [タスク管理用のリポジトリ](https://github.com/open-rdc/TsukubaChallenge)

* [ソースコードのリポジトリ](https://github.com/open-rdc/icart_mini)

i-Cart miniはつくば大学を中心としたT-frog Projectの成果物で簡便に構築可能なオープンソースハードウェアと安定した走行性能が特徴です。

詳しい情報は[i-Cart miniのホームページ](http://t-frog.com/)を参照してください。

つくばチャレンジは人の生活空間で安定して動作できるロボットの実現を目指しており、以下のような1.43kmの屋外自律走行のためのコースが設定されています。

![course]({{ BASE_PATH }}/images/tsukuba2014/course.jpg)

本走行前にも約1ヶ月おきに実験走行日が設定されていてその日は各チームとも実際の公道を使った実験が法的に許可されています。

我々の実績としては時間の関係上、公園（トライアル区間）と市街地（実験走行区間）に分割して走行実験を重ね両方共5回以上の完走、フルコースでのテストは1回だけの実施で1時間20分の自律走行を完遂しました。

* トライアル区間の動画

<iframe width="640" height="360" src="//www.youtube.com/embed/hMI6cKtHK74" frameborder="0" allowfullscreen></iframe>

トライアル区間はランドマークが少ないことから難所と言われていてここを通過できないチームは実験走行区間で自律走行の実験をすることが出来ません。

実験走行日を含め、1回以上トライアル区間を抜けることが出来たチームは48チーム中19チームで半数以下という結果になりました。

* 実験走行区間の動画(x16)

<iframe width="640" height="360" src="//www.youtube.com/embed/gSNe8qpqsU0" frameborder="0" allowfullscreen></iframe>

* フルコースの完走の動画

<iframe width="640" height="360" src="//www.youtube.com/embed/hMI6cKtHK74" frameborder="0" allowfullscreen></iframe>

安定して走行しているように見えますが、リアルワールドでの自律走行はそこまで甘くはなく本走行では向かい合ったロボットと衝突し、その影響でリタイヤとなりました。

![crash]({{ BASE_PATH }}/images/tsukuba2014/crash.png)

図の青色の地点でロボット同士の回避行動が干渉して衝突、12分間接触したのちコースに復帰しましたが接触時にタイヤが空転していた影響でオドメトリ誤差が蓄積し、赤色の地点でコースアウトしました。

お互いのロボットが後方視界を確保していなかったためバックすることが出来ず、接触時間が長引きました。

本走行の結果のまとめは以下のURLを参照してください。

http://www.tsukubachallenge.jp/tc2014/2014honsoko

本番になると想定外のアクシデントに見舞われるのはロボコンものの宿命ですが、本走行後の油田先生の演説にあった「想定外を想定内に収める努力をしない限り実際に運用可能なロボットにはならない」という言葉が胸に突き刺さります。

思い返せば全員初参加のメンバでチームを結成してからあっという間に駆け抜けた2ヶ月間で、ハード・ソフトをすべて新規採用のもので挑んだ今大会の敗因はリアルワールドへの認識の甘さ、準備不足と実力不足にあります。

つくばチャレンジに毎年参加されている方からは事前に「ROSのNavigationでの完走は出来ないのではないか」との声も多く頂いており、「リアルワールドはそんなに甘くないから覚悟しておけ」と一喝されていたのですが今回はその言葉通りの結果に終わってしまいました。

ROSのNavigationを採用したチームもそれなりに出場していたのですがそのほとんどが100m以内でのリタイヤとなっており、つくばチャレンジの厳しさが感じられます。

各チームでSLAMのパッケージや可視化ツール等の部分的な普及は進んでいるのですが、肝心のNavigationに関するノウハウがROSという共通化されたミドルウェア上で運用、共有される必要性があると考えています。

我々はハードウェアの違いによりソースコードの共通が難しいロボット業界においても、更なる発展のためにはある程度共通化されたフレームワーク上におけるソーシャルコーディングの流れが必要不可欠だと考えています。

時代と共に変わりゆくものですが現状それを可能にしうるものがROSであり、i-Cart miniというオープンなハードウェアとROSを組み合わせてシステムを構築したのも技術を共有することにより大会への新規参加を容易にし、ノウハウの共有が促進されることを願ってのものでした。

完走チームのシステムをコマンド一つで再現可能にするということを目標に、来年度に向けた開発を既に開始しています。

技術的な課題としては動的物体の回避性能向上、衝突後の復旧動作の改善、低い縁石等の障害物を避けるための3次元的な環境認識(今回は2次元)等に取り組む予定です。

